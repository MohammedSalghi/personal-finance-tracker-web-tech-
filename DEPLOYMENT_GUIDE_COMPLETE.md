# 🚀 Complete Deployment Guide - Personal Finance Tracker

This guide will help you deploy your full-stack Personal Finance Tracker application to the cloud.

## Architecture Overview
- **Frontend**: Vue.js (deployed on Netlify)
- **Backend**: PHP API (deployed on Railway)
- **Database**: MySQL (hosted on Railway)

## 📋 Prerequisites
- GitHub account (code repository)
- Railway account (backend + database)
- Netlify account (frontend)

---

## 🔧 Step 1: Backend Deployment (Railway)

### 1.1 Create Railway Account
1. Visit [railway.app](https://railway.app)
2. Sign up with GitHub
3. Connect your GitHub repository

### 1.2 Deploy Backend
1. **Create New Project** → "Deploy from GitHub repo"
2. Select your repository: `personal-finance-tracker-web-tech-`
3. **Root Directory**: Set to `finance-backend/`
4. **Add MySQL Database**:
   - Click "Add Service" → "Database" → "MySQL"
   - Railway will auto-generate credentials

### 1.3 Configure Environment Variables
In Railway dashboard → Your service → Variables:
```bash
APP_ENV=production
DB_HOST=mysql.railway.internal
DB_NAME=railway
DB_USER=root
DB_PASSWORD=[auto-generated by Railway]
```

### 1.4 Database Setup
1. Connect to Railway MySQL using provided credentials
2. Import the database schema:
   ```sql
   -- Use the file: finance-backend/personal_finance_tracker.sql
   ```
3. Or use Railway's web terminal to run:
   ```bash
   mysql -h mysql.railway.internal -u root -p railway < personal_finance_tracker.sql
   ```

### 1.5 Get Your Backend URL
- Copy the generated URL (e.g., `https://your-app-name.up.railway.app`)
- Test it: `https://your-app-name.up.railway.app/health.php`

---

## 🎨 Step 2: Frontend Deployment (Netlify)

### 2.1 Update Environment Variables
1. Edit `.env.production` with your Railway backend URL:
   ```bash
   VUE_APP_API_BASE_URL=https://your-app-name.up.railway.app/api/transactions
   VUE_APP_ENVIRONMENT=production
   VUE_APP_DEBUG=false
   ```

### 2.2 Update CORS Configuration
Update `finance-backend/config/cors.php` to include your Netlify URL:
```php
$allowedOrigins = [
    'https://your-netlify-app.netlify.app',
    // ... other origins
];
```

### 2.3 Deploy to Netlify
1. **Option A: Git Integration (Recommended)**
   - Visit [netlify.com](https://netlify.com)
   - "New site from Git" → GitHub → Select repository
   - **Build settings**:
     - Build command: `npm install && npm run build:prod`
     - Publish directory: `dist`
   
2. **Option B: Manual Upload**
   - Run `npm run build:prod` locally
   - Drag & drop the `dist` folder to Netlify

### 2.4 Configure Environment Variables in Netlify
In Netlify Dashboard → Site Settings → Environment Variables:
```bash
VUE_APP_API_BASE_URL=https://your-app-name.up.railway.app/api/transactions
VUE_APP_ENVIRONMENT=production
VUE_APP_DEBUG=false
NODE_VERSION=18
```

---

## 🔒 Step 3: Final Configuration

### 3.1 Update CORS in Backend
1. In Railway, redeploy your backend after updating CORS
2. Add your final Netlify URL to allowed origins
3. Test API endpoints: `https://your-app.up.railway.app/api/transactions/get.php`

### 3.2 Test Full Application
1. **Frontend**: Visit your Netlify URL
2. **Backend Health**: Check `https://your-backend.up.railway.app/health.php`
3. **Database**: Verify transactions can be created/retrieved
4. **CORS**: Ensure no browser console errors

---

## 🌐 Alternative Deployment Options

### Option 1: Vercel + Railway
- **Frontend**: Vercel (instead of Netlify)
- **Backend**: Railway (same as above)
- Update `vercel.json` configuration

### Option 2: Netlify + Render
- **Frontend**: Netlify
- **Backend**: Render.com (instead of Railway)
- Update database configuration for Render

### Option 3: Full Stack on Render
- Deploy both frontend and backend on Render
- Use Render's PostgreSQL database

---

## ✅ Deployment Checklist

### Backend (Railway)
- [ ] Repository connected
- [ ] MySQL database created
- [ ] Environment variables configured
- [ ] Database schema imported
- [ ] Health endpoint working
- [ ] CORS configured for frontend domain

### Frontend (Netlify)
- [ ] Build command configured
- [ ] Environment variables set
- [ ] Custom domain (optional)
- [ ] HTTPS enabled
- [ ] Redirects working (SPA routing)

### Testing
- [ ] Application loads without errors
- [ ] Can create new transactions
- [ ] Can view transaction list
- [ ] Charts and dashboard working
- [ ] Responsive design on mobile
- [ ] No CORS errors in browser console

---

## 🔍 Troubleshooting

### Common Issues

1. **CORS Errors**
   - Check allowed origins in `cors.php`
   - Verify frontend URL is correct
   - Ensure HTTPS is used in production

2. **Database Connection**
   - Verify Railway environment variables
   - Check database schema is imported
   - Test database connectivity

3. **Build Failures**
   - Check Node.js version compatibility
   - Verify all dependencies are installed
   - Review build logs in Netlify/Railway

4. **API 404 Errors**
   - Confirm backend URL in environment variables
   - Check API endpoint paths
   - Verify Railway deployment is successful

---

## 📞 Support

If you encounter issues:
1. Check browser console for errors
2. Review deployment logs
3. Verify environment variables
4. Test API endpoints individually

Your application will be accessible at:
- **Frontend**: `https://your-app.netlify.app`
- **Backend**: `https://your-app.up.railway.app`
- **API**: `https://your-app.up.railway.app/api/transactions`
